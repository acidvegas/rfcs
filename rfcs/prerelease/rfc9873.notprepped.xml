<?xml version='1.0' encoding='UTF-8'?>

<!DOCTYPE rfc [
 <!ENTITY nbsp    "&#160;">
 <!ENTITY zwsp   "&#8203;">
 <!ENTITY nbhy   "&#8209;">
 <!ENTITY wj     "&#8288;">
]> 

<rfc xmlns:xi="http://www.w3.org/2001/XInclude" docName="draft-ietf-regext-epp-eai-27" number="9873" category="std" ipr="trust200902" obsoletes="" updates="" submissionType="IETF" xml:lang="en" symRefs="true" sortRefs="true" tocInclude="true" version="3" consensus="true">

  <front>
    <title abbrev="EPP Additional Email Address Extension">Additional Email Address Extension for the Extensible Provisioning Protocol (EPP)</title>
<seriesInfo name="RFC" value="9873"/>
    <author fullname="Dmitry Belyavskiy" initials="D." surname="Belyavskiy">
      <address>
        <postal>
          <street>Karpatska 241/3</street>
	  <city>Brno</city>
	  <code>62500</code>
          <country>Czech Republic</country>
        </postal>
        <phone>+420 603 261 036</phone>
        <email>beldmit@gmail.com</email>
      </address>
    </author>
    <author fullname="James Gould" surname="Gould">
      <organization>VeriSign, Inc.</organization>
      <address>
        <postal>
          <street>12061 Bluemont Way</street>
          <city>Reston</city>
          <region>VA</region>
          <code>20190</code>
          <country>United States of America</country>
        </postal>
        <email>jgould@verisign.com</email>
        <uri>https://www.verisign.com</uri>
      </address>
    </author>
    <author initials="S." surname="Hollenbeck" fullname="Scott Hollenbeck">
        <organization>Verisign Labs</organization>
        <address>
            <postal>
                <street>12061 Bluemont Way</street>
                <city>Reston</city>
                <region>VA</region>
                <code>20190</code>
                <country>United States of America</country>
            </postal>
            <email>shollenbeck@verisign.com</email>
            <uri>https://www.verisignlabs.com/</uri>
        </address>
    </author>
    <date month="October" year="2025"/>
    <area>ART</area>
    <workgroup>regext</workgroup>

    <abstract>
      <t>The Extensible Provisioning Protocol (EPP) does not inherently support internationalized email addresses because the specifications for these addresses did not exist when EPP was developed. This document describes a command-response extension that adds support for associating an additional email address with an EPP contact object. That additional email address can be either an internationalized email address or an ASCII-only address.</t>
    </abstract>
  </front>
  <middle>
    <section numbered="true" toc="default">
      <name>Introduction</name>
      <t>The framework for internationalized email addresses is described in <xref target="RFC6530" format="default"/>.	This document describes an Extensible Provisioning Protocol (EPP) <xref target="RFC5730" format="default"/> command-response extension that adds support for adding a second email address to the EPP contact object mapping <xref target="RFC5733" format="default"/>. The syntax for the email address associated with the base contact object is described in <xref target="RFC5733" section="2.6"/>. The second email address can be either an ASCII-only email address or an internationalized SMTPUTF8 email address <xref target="RFC6530" format="default"/>. This second address can be used to identify an alternate ASCII-only email address for use in case of primary address delivery issues. It can also be used to identify an SMTPUTF8 address for contact purposes, in which case the ASCII-only address can be used in case of SMTPUTF8 address delivery issues.</t>
	  
	  <t>While this extension adds support for an additional email address to contact objects, and that additional email address can be an SMTPUTF8 address, it does not in any way update or change any other EPP extension that includes an email address. Adding support for SMTPUTF8 addresses to those extensions will require an update to the relevant extension specifications. In cases where a contact object contains two email addresses, all users of these addresses should be aware that either address may be forwarded to the other. This implies that a message sent to an ASCII-only address may receive a reply from an SMTPUTF8 address or vice versa.</t>
	  
        <section numbered="true" toc="default">
        <name>Conventions Used in This Document</name>
        <t>
    The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>", "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL
    NOT</bcp14>", "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>", "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>",
    "<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be interpreted as
    described in BCP&nbsp;14 <xref target="RFC2119"/> <xref target="RFC8174"/> 
    when, and only when, they appear in all capitals, as shown here.
        </t>


  <t>XML is case sensitive. Unless stated otherwise, XML specifications
  and examples provided in this document <bcp14>MUST</bcp14> be interpreted in the
  character case presented in order to develop a conforming
  implementation.</t>

  <t>In examples, "C:" represents lines sent by a protocol client, and "S:" represents lines returned by a protocol server.
  Indentation and white space in the examples are provided only to
  illustrate element relationships and are not <bcp14>REQUIRED</bcp14> in the protocol.</t>

  <t>The XML namespace prefix "addlEmail" is used for the namespace
"urn:ietf:params:xml:ns:epp:addlEmail-1.0", but implementations <bcp14>MUST NOT</bcp14> depend on
  it and instead <bcp14>MUST</bcp14> employ
  a proper namespace-aware XML parser and serializer to interpret and
  output the XML documents.</t>

      </section>
    </section>
    <section anchor="emailAddressSpec" numbered="true" toc="default">
      <name>Email Address Specification</name>
<t>The EPP contact object mapping <xref target="RFC5733" format="default"/> normatively references <xref target="RFC5322" format="default"/> as the specification for email address syntax. That specification does not include support for internationalized email addresses. <xref target="RFC6530" format="default"/> provides an overview and describes the framework for internationalized email. SMTPUTF8 email address syntax is described in <xref target="RFC6531" section="3.3"/>. <xref target="RFC6531" format="default"/> extends the Mailbox, Local-part, and Domain ABNF rules in <xref target="RFC5321" format="default"/> to support "UTF8-non-ascii" (defined in <xref target="RFC6532" section="3.1"/>) for the local-part and to support U-label (defined in <xref target="RFC5890" section="2.3.2.1"/>) for the domain. The validation rules described in <xref target="RFC6531" format="default"/> <bcp14>MUST</bcp14> be followed when processing internationalized email addresses associated with this extension.</t>
    </section>
    <section anchor="addlEmailElement" numbered="true" toc="default">
      <name>Additional Email Address Element</name>
      <t>A second email address can be set using the &lt;addlEmail:addlEmail&gt; element
      with the command-response extensions defined in <xref target="commands"/>.  The &lt;addlEmail:addlEmail&gt; element contains the following child element:</t>
      <dl newline="false" indent="4">
          <dt>&lt;addlEmail:email&gt;:</dt>
          <dd>An element following the syntax in <xref target="emailAddressSpec"/> for defining a second ASCII or SMTPUTF8 address.  An empty &lt;addlEmail:email/&gt; element unsets
          the second email address in the Update Command (<xref target="updateCommand"></xref>) and indicates the second email is not set in the Info Response (<xref target="infoCommand"></xref>).
		  The &lt;addlEmail:email&gt; element contains an <bcp14>OPTIONAL</bcp14> "primary" attribute that can be used to indicate that the extension email address should be treated as the
		  primary email address for the extended contact object. The "primary" attribute <bcp14>MUST NOT</bcp14> be present if the &lt;addlEmail:email&gt; is empty.</dd>
      </dl>
	  <t>Additional email address considerations:</t>
	  <ul>
          <li>The value set for the &lt;contact:disclose&gt;&lt;contact:email/&gt; "flag" attribute (described in <xref target="RFC5733" section="2.9"/>) <bcp14>MUST</bcp14> also be applied to all additional email addresses that are added by a contact extension.</li>
	  <li>Any address included in an extension is intended to be an additional address that is associated only with the primary &lt;contact:email&gt; address, and support for any other additional email addresses <bcp14>MUST</bcp14> explicitly describe how the additional addresses are associated with the existing addresses.</li>
      </ul>
    </section>
    <section numbered="true" toc="default">
      <name>Extension Considerations</name>
      <section numbered="true" toc="default">
  	    <name>Signaling Client and Server Support</name>
  	    <t>
           As described in <xref target="RFC5730" section="2.4"/>, the client and the server can signal support for the extension using a
           namespace URI in the login and greeting extension services, respectively.  The
           namespace URI "urn:ietf:params:xml:ns:epp:addlEmail-1.0" is used to signal support for the extension.
	         The client includes the namespace URI in an &lt;svcExtension&gt; &lt;extURI&gt; element of
           the &lt;login&gt; command <xref target="RFC5730" format="default"/>.  The server includes the namespace URI
           in an &lt;svcExtension&gt; &lt;extURI&gt; element of the greeting <xref target="RFC5730" format="default"/>.
  	    </t>
      </section>
      <section numbered="true" toc="default">
  	    <name>Extension Behavior</name>
          <section numbered="true" toc="default">
      	    <name>Extension Negotiated</name>
	    <t>
		    If both client and server have indicated support for SMTPUTF8 addresses during session establishment,
		    they <bcp14>MUST</bcp14> be able to process an SMTPUTF8 address in any extended contact object during the established EPP session. Server and client obligations when this extension has been successfully negotiated in the EPP session are described below.
      	    </t>
      	    <t>The server <bcp14>MUST</bcp14> satisfy the following obligations when support for this extension has been negotiated:</t>
      	    <ul>
      	    <li>Accept SMTPUTF8-compliant addresses for the extended contact object in the EPP session.</li>
	    <li>Support email address validation based on the SMTPUTF8 validation rules defined in <xref target="emailAddressSpec" format="default"/>.</li>
	    <li>Store email properties that support internationalized characters.</li>
	    <li>Return SMTPUTF8-compliant addresses for the extended contact object in EPP responses.</li>
	    <li>Support the SMTP extension for internationalized email described in <xref target="RFC6531" format="default"/> when sending or receiving email.</li>
          </ul>

          <t>The client <bcp14>MUST</bcp14> satisfy the following obligations when support for this extension has been negotiated:</t>
          <ul>
      	    <li>Provide SMTPUTF8-compliant addresses for the extended contact object in the EPP session.</li>
      	    <li>Accept SMTPUTF8-compliant addresses for the extended contact object in EPP responses.</li>
	    <li>Support the SMTP extension for internationalized email described in <xref target="RFC6531" format="default"/> when sending or receiving email.</li>
      	  </ul>
        </section>

        <section numbered="true" toc="default">
          <name>Extension Not Negotiated</name>
          <t>An extended contact object <bcp14>MUST NOT</bcp14> be provided or returned by either an EPP client or an EPP server when support for this extension is not successfully negotiated at the start of an EPP session.</t>
        </section>
      </section>
    </section>

    <section anchor="commands">
      <name>EPP Command Mapping</name>
      <t>A detailed description of the EPP syntax and semantics can be found
      in the EPP core protocol specification <xref target="RFC5730"/>.
      This section defines the provisioning of an alternate email address.</t>

      <section anchor="queryCommands">
	<name>EPP Query Commands</name>

        <t>EPP provides three commands to retrieve object information: &lt;check&gt; to determine
        if an object can be provisioned, &lt;info&gt; to retrieve  information associated
        with an object, and &lt;transfer&gt; to retrieve object-transfer status information.</t>

      <section anchor="checkCommand">
	<name>EPP &lt;check&gt; Command</name>

        <t>This extension does not add any elements to the EPP &lt;check&gt; command
        or &lt;check&gt; response described in <xref target="RFC5730"/>.</t>

      </section>

      <section anchor="infoCommand">
	<name>EPP &lt;info&gt; Command</name>

        <t>This extension does not add any elements to the EPP &lt;info&gt; command
        response described in <xref target="RFC5730"/>.</t>

          <t>
          If the query is successful, the server replies with an &lt;addlEmail:addlEmail&gt; element (<xref target="addlEmailElement"></xref>)
          along with the regular EPP &lt;resData&gt;.
          </t>

          <figure>
            <name>Example &lt;info&gt; Contact Response Using the
            &lt;addlEmail:addlEmail&gt; Extension with No Alternate Email Address</name>
<sourcecode type="xml" markers="false"><![CDATA[
S:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
S:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
S:  <response>
S:    <result code="1000">
S:      <msg>Command completed successfully</msg>
S:    </result>
S:    <resData>
S:      <contact:infData
S:       xmlns:contact="urn:ietf:params:xml:ns:contact-1.0">
S:        <contact:id>sh8013</contact:id>
S:        <contact:roid>SH8013-REP</contact:roid>
S:        <contact:status s="linked"/>
S:        <contact:status s="clientDeleteProhibited"/>
S:        <contact:postalInfo type="int">
S:          <contact:name>John Doe</contact:name>
S:          <contact:org>Example Inc.</contact:org>
S:          <contact:addr>
S:            <contact:street>123 Example Dr.</contact:street>
S:            <contact:street>Suite 100</contact:street>
S:            <contact:city>Dulles</contact:city>
S:            <contact:sp>VA</contact:sp>
S:            <contact:pc>20166-6503</contact:pc>
S:            <contact:cc>US</contact:cc>
S:          </contact:addr>
S:        </contact:postalInfo>
S:        <contact:voice x="1234">+1.7035555555</contact:voice>
S:        <contact:fax>+1.7035555556</contact:fax>
S:        <contact:email>jdoe@example.com</contact:email>
S:        <contact:clID>ClientY</contact:clID>
S:        <contact:crID>ClientX</contact:crID>
S:        <contact:crDate>1999-04-03T22:00:00.0Z</contact:crDate>
S:        <contact:upID>ClientX</contact:upID>
S:        <contact:upDate>1999-12-03T09:00:00.0Z</contact:upDate>
S:        <contact:trDate>2000-04-08T09:00:00.0Z</contact:trDate>
S:        <contact:authInfo>
S:          <contact:pw>2fooBAR</contact:pw>
S:        </contact:authInfo>
S:        <contact:disclose flag="0">
S:          <contact:voice/>
S:          <contact:email/>
S:        </contact:disclose>
S:      </contact:infData>
S:    </resData>
S:    <extension>
S:      <addlEmail:addlEmail
S:       xmlns:addlEmail="urn:ietf:params:xml:ns:epp:addlEmail-1.0">
S:        <addlEmail:email/>
S:      </addlEmail:addlEmail>
S:    </extension>
S:    <trID>
S:      <clTRID>ABC-12345</clTRID>
S:      <svTRID>54322-XYZ</svTRID>
S:    </trID>
S:  </response>
S:</epp>]]></sourcecode>
          </figure>

          <figure>
            <name>Example &lt;info&gt; Contact Response Using the
            &lt;addlEmail:addlEmail&gt; Extension with an Alternate ASCII Email Address</name>
<sourcecode type="xml" markers="false"><![CDATA[
S:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
S:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
S:  <response>
S:    <result code="1000">
S:      <msg>Command completed successfully</msg>
S:    </result>
S:    <resData>
S:      <contact:infData
S:       xmlns:contact="urn:ietf:params:xml:ns:contact-1.0">
S:        <contact:id>sh8013</contact:id>
S:        <contact:roid>SH8013-REP</contact:roid>
S:        <contact:status s="linked"/>
S:        <contact:status s="clientDeleteProhibited"/>
S:        <contact:postalInfo type="int">
S:          <contact:name>John Doe</contact:name>
S:          <contact:org>Example Inc.</contact:org>
S:          <contact:addr>
S:            <contact:street>123 Example Dr.</contact:street>
S:            <contact:street>Suite 100</contact:street>
S:            <contact:city>Dulles</contact:city>
S:            <contact:sp>VA</contact:sp>
S:            <contact:pc>20166-6503</contact:pc>
S:            <contact:cc>US</contact:cc>
S:          </contact:addr>
S:        </contact:postalInfo>
S:        <contact:voice x="1234">+1.7035555555</contact:voice>
S:        <contact:fax>+1.7035555556</contact:fax>
S:        <contact:email>jdoe@example.com</contact:email>
S:        <contact:clID>ClientY</contact:clID>
S:        <contact:crID>ClientX</contact:crID>
S:        <contact:crDate>1999-04-03T22:00:00.0Z</contact:crDate>
S:        <contact:upID>ClientX</contact:upID>
S:        <contact:upDate>1999-12-03T09:00:00.0Z</contact:upDate>
S:        <contact:trDate>2000-04-08T09:00:00.0Z</contact:trDate>
S:        <contact:authInfo>
S:          <contact:pw>2fooBAR</contact:pw>
S:        </contact:authInfo>
S:        <contact:disclose flag="0">
S:          <contact:voice/>
S:          <contact:email/>
S:        </contact:disclose>
S:      </contact:infData>
S:    </resData>
S:    <extension>
S:      <addlEmail:addlEmail
S:       xmlns:addlEmail="urn:ietf:params:xml:ns:epp:addlEmail-1.0">
S:        <addlEmail:email>jdoe-alt@example.net</addlEmail:email>
S:      </addlEmail:addlEmail>
S:    </extension>
S:    <trID>
S:      <clTRID>ABC-12345</clTRID>
S:      <svTRID>54322-XYZ</svTRID>
S:    </trID>
S:  </response>
S:</epp>]]></sourcecode>
          </figure>

          <figure>
            <name>Example &lt;info&gt; Contact Response Using the
            &lt;addlEmail:addlEmail&gt; Extension with an SMTPUTF8 Primary Email Address</name>
<sourcecode type="xml" markers="false"><![CDATA[
S:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
S:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
S:  <response>
S:    <result code="1000">
S:      <msg>Command completed successfully</msg>
S:    </result>
S:    <resData>
S:      <contact:infData
S:       xmlns:contact="urn:ietf:params:xml:ns:contact-1.0">
S:        <contact:id>sh8013</contact:id>
S:        <contact:roid>SH8013-REP</contact:roid>
S:        <contact:status s="linked"/>
S:        <contact:status s="clientDeleteProhibited"/>
S:        <contact:postalInfo type="int">
S:          <contact:name>John Doe</contact:name>
S:          <contact:org>Example Inc.</contact:org>
S:          <contact:addr>
S:            <contact:street>123 Example Dr.</contact:street>
S:            <contact:street>Suite 100</contact:street>
S:            <contact:city>Dulles</contact:city>
S:            <contact:sp>VA</contact:sp>
S:            <contact:pc>20166-6503</contact:pc>
S:            <contact:cc>US</contact:cc>
S:          </contact:addr>
S:        </contact:postalInfo>
S:        <contact:voice x="1234">+1.7035555555</contact:voice>
S:        <contact:fax>+1.7035555556</contact:fax>
S:        <contact:email>jdoe@example.com</contact:email>
S:        <contact:clID>ClientY</contact:clID>
S:        <contact:crID>ClientX</contact:crID>
S:        <contact:crDate>1999-04-03T22:00:00.0Z</contact:crDate>
S:        <contact:upID>ClientX</contact:upID>
S:        <contact:upDate>1999-12-03T09:00:00.0Z</contact:upDate>
S:        <contact:trDate>2000-04-08T09:00:00.0Z</contact:trDate>
S:        <contact:authInfo>
S:          <contact:pw>2fooBAR</contact:pw>
S:        </contact:authInfo>
S:        <contact:disclose flag="0">
S:          <contact:voice/>
S:          <contact:email/>
S:        </contact:disclose>
S:      </contact:infData>
S:    </resData>
S:    <extension>
S:      <addlEmail:addlEmail
S:       xmlns:addlEmail="urn:ietf:params:xml:ns:epp:addlEmail-1.0">
S:        <addlEmail:email
            primary="true">麥克風@example.com</addlEmail:email>
S:      </addlEmail:addlEmail>
S:    </extension>
S:    <trID>
S:      <clTRID>ABC-12345</clTRID>
S:      <svTRID>54322-XYZ</svTRID>
S:    </trID>
S:  </response>
S:</epp>]]></sourcecode>
          </figure>

      </section>

      <section anchor="transferQueryCommand">
	<name>EPP &lt;transfer&gt; Query Command</name>

       <t>This extension does not add any elements to the EPP &lt;transfer&gt; query command
       or &lt;transfer&gt; query response described in <xref target="RFC5730"/>.</t>

      </section>

      </section>

      <section anchor="transformCommands">
	<name>EPP Transform Commands</name>

        <t>EPP provides five commands to transform objects: &lt;create&gt; to create an instance of an object,
        &lt;delete&gt; to delete an instance of an object, &lt;renew&gt; to extend the validity period of an object,
        &lt;transfer&gt; to manage object sponsorship changes, and &lt;update&gt; to change information associated
        with an object.</t>

      <section anchor="createCommand">
	<name>EPP &lt;create&gt; Command</name>
	
       <t>This extension defines additional elements to extend the EPP
        &lt;create&gt; command described in <xref target="RFC5733"/>.</t>

       <t>The EPP &lt;create&gt; command provides a transform operation that allows a client to create an instance of an object.
       In addition to the EPP command elements described in <xref target="RFC5733"/>, the command <bcp14>MUST</bcp14> contain a
       child &lt;addlEmail:addlEmail&gt; element (<xref target="addlEmailElement"></xref>) for the client to set an alternate email address.</t>

       <figure>
            <name>Example &lt;create&gt; Command to Create a Contact Object with an Alternate ASCII Email Address</name>

            <sourcecode type="xml" markers="false"><![CDATA[
C:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
C:  <command>
C:    <create>
C:      <contact:create
C:       xmlns:contact="urn:ietf:params:xml:ns:contact-1.0">
C:        <contact:id>sh8013</contact:id>
C:        <contact:postalInfo type="int">
C:          <contact:name>John Doe</contact:name>
C:          <contact:org>Example Inc.</contact:org>
C:          <contact:addr>
C:            <contact:street>123 Example Dr.</contact:street>
C:            <contact:street>Suite 100</contact:street>
C:            <contact:city>Dulles</contact:city>
C:            <contact:sp>VA</contact:sp>
C:            <contact:pc>20166-6503</contact:pc>
C:            <contact:cc>US</contact:cc>
C:          </contact:addr>
C:        </contact:postalInfo>
C:        <contact:voice x="1234">+1.7035555555</contact:voice>
C:        <contact:fax>+1.7035555556</contact:fax>
C:        <contact:email>jdoe@example.com</contact:email>
C:        <contact:authInfo>
C:          <contact:pw>2fooBAR</contact:pw>
C:        </contact:authInfo>
C:        <contact:disclose flag="0">
C:          <contact:voice/>
C:          <contact:email/>
C:        </contact:disclose>
C:      </contact:create>
C:    </create>
C:    <extension>
C:      <addlEmail:addlEmail
C:       xmlns:addlEmail="urn:ietf:params:xml:ns:epp:addlEmail-1.0">
C:        <addlEmail:email>jdoe-alt@example.net</addlEmail:email>
C:      </addlEmail:addlEmail>
C:    </extension>
C:    <clTRID>ABC-12345</clTRID>
C:  </command>
C:</epp>]]></sourcecode>
       </figure>

       <figure>
            <name>Example &lt;create&gt; Command to Create a Contact Object with a Primary SMTPUTF8 Email Address</name>

            <sourcecode type="xml" markers="false"><![CDATA[
C:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
C:  <command>
C:    <create>
C:      <contact:create
C:       xmlns:contact="urn:ietf:params:xml:ns:contact-1.0">
C:        <contact:id>sh8013</contact:id>
C:        <contact:postalInfo type="int">
C:          <contact:name>John Doe</contact:name>
C:          <contact:org>Example Inc.</contact:org>
C:          <contact:addr>
C:            <contact:street>123 Example Dr.</contact:street>
C:            <contact:street>Suite 100</contact:street>
C:            <contact:city>Dulles</contact:city>
C:            <contact:sp>VA</contact:sp>
C:            <contact:pc>20166-6503</contact:pc>
C:            <contact:cc>US</contact:cc>
C:          </contact:addr>
C:        </contact:postalInfo>
C:        <contact:voice x="1234">+1.7035555555</contact:voice>
C:        <contact:fax>+1.7035555556</contact:fax>
C:        <contact:email>jdoe@example.com</contact:email>
C:        <contact:authInfo>
C:          <contact:pw>2fooBAR</contact:pw>
C:        </contact:authInfo>
C:        <contact:disclose flag="0">
C:          <contact:voice/>
C:          <contact:email/>
C:        </contact:disclose>
C:      </contact:create>
C:    </create>
C:    <extension>
C:      <addlEmail:addlEmail
C:       xmlns:addlEmail="urn:ietf:params:xml:ns:epp:addlEmail-1.0">
C:        <addlEmail:email
            primary="true">麥克風@example.com</addlEmail:email>
C:      </addlEmail:addlEmail>
C:    </extension>
C:    <clTRID>ABC-12345</clTRID>
C:  </command>
C:</epp>]]></sourcecode>
       </figure>

       <t>This extension does not add any elements to the EPP &lt;create&gt; response described
       in <xref target="RFC5730"/>.</t>
      </section>

      <section anchor="deleteCommand">
	<name>EPP &lt;delete&gt; Command</name>
       <t>This extension does not add any elements to the EPP &lt;delete&gt; command
       or &lt;delete&gt; response described in <xref target="RFC5730"/>.</t>
      </section>

      <section anchor="renewCommand">
	<name>EPP &lt;renew&gt; Command</name>
       <t>This extension does not add any elements to the EPP &lt;renew&gt; command
       or &lt;renew&gt; response described in <xref target="RFC5730"/>.</t>
      </section>

      <section anchor="transferCommand">
	<name>EPP &lt;transfer&gt; Command</name>
        <t>This extension does not add any elements to the EPP &lt;transfer&gt; command
        or &lt;transfer&gt; response described in <xref target="RFC5730"/>.</t>
      </section>

      <section anchor="updateCommand">
	<name>EPP &lt;update&gt; Command</name>
        <t>This extension defines additional elements to extend the EPP
         &lt;update&gt; command described in <xref target="RFC5733"/>.</t>

        <t>The EPP &lt;update&gt; command provides a transform operation that allows a client to update an instance of an object.
        In addition to the EPP command elements described in <xref target="RFC5733"/>, the command <bcp14>MUST</bcp14> contain a
        child &lt;addlEmail:addlEmail&gt; element (<xref target="addlEmailElement"></xref>) for the client to set or unset an alternate email address.
        If the alternate email address cannot be applied to the object, the server <bcp14>MUST</bcp14> return an EPP error result code of 2201.</t>

        <figure>
             <name>Example &lt;update&gt; Command to Set a Contact Object with an Alternate ASCII Email Address</name>

             <sourcecode type="xml" markers="false"><![CDATA[
C:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
C: <command>
C:   <update>
C:     <contact:update
C:      xmlns:contact="urn:ietf:params:xml:ns:contact-1.0">
C:       <contact:id>sh8013</contact:id>
C:     </contact:update>
C:   </update>
C:   <extension>
C:     <addlEmail:addlEmail
C:      xmlns:addlEmail="urn:ietf:params:xml:ns:epp:addlEmail-1.0">
C:       <addlEmail:email>jdoe-alt@example.net</addlEmail:email>
C:     </addlEmail:addlEmail>
C:   </extension>
C:   <clTRID>ABC-12345</clTRID>
C: </command>
C:</epp>]]></sourcecode>
        </figure>

        <figure>
             <name>Example &lt;update&gt; Command to Set a Contact Object with an Alternate SMTPUTF8 Email Address</name>

             <sourcecode type="xml" markers="false"><![CDATA[
C:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
C: <command>
C:   <update>
C:     <contact:update
C:      xmlns:contact="urn:ietf:params:xml:ns:contact-1.0">
C:       <contact:id>sh8013</contact:id>
C:     </contact:update>
C:   </update>
C:   <extension>
C:     <addlEmail:addlEmail
C:      xmlns:addlEmail="urn:ietf:params:xml:ns:epp:addlEmail-1.0">
C:       <addlEmail:email>麥克風@example.com</addlEmail:email>
C:     </addlEmail:addlEmail>
C:   </extension>
C:   <clTRID>ABC-12345</clTRID>
C: </command>
C:</epp>]]></sourcecode>
        </figure>

        <figure>
             <name>Example &lt;update&gt; Command to Unset a Contact Object Alternate Email Address</name>

             <sourcecode type="xml" markers="false"><![CDATA[
C:<?xml version="1.0" encoding="UTF-8" standalone="no"?>
C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
C: <command>
C:   <update>
C:     <contact:update
C:      xmlns:contact="urn:ietf:params:xml:ns:contact-1.0">
C:       <contact:id>sh8013</contact:id>
C:     </contact:update>
C:   </update>
C:   <extension>
C:     <addlEmail:addlEmail
C:      xmlns:addlEmail="urn:ietf:params:xml:ns:epp:addlEmail-1.0">
C:       <addlEmail:email/>
C:     </addlEmail:addlEmail>
C:   </extension>
C:   <clTRID>ABC-12345</clTRID>
C: </command>
C:</epp>]]></sourcecode>
        </figure>


        <t>This extension does not add any elements to the EPP &lt;update&gt; response described
        in <xref target="RFC5730"/>.</t>

      </section>

    </section>

    </section>

    <section anchor="syntax" numbered="true" toc="default">
      <name>Formal Syntax</name>
      <t>The EPP Additional Email Address Extension schema is presented here.</t>
      <t>The formal syntax shown here is a complete XML Schema <xref target="W3C.REC-xmlschema-1-20041028"/> <xref target="W3C.REC-xmlschema-2-20041028"/> representation of the object
	  mapping suitable for automated validation of EPP XML instances. The &lt;CODE BEGINS&gt;
	  and &lt;CODE ENDS&gt; tags are not part of the XML Schema; they are used to note the
	  beginning and ending of the XML Schema for URI registration purposes.</t>
      <section numbered="true" toc="default">
        <name>EPP Additional Email Address Extension Schema</name>
<sourcecode type="xml" markers="true"><![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema"
  xmlns:addlEmail="urn:ietf:params:xml:ns:epp:addlEmail-1.0"
  targetNamespace="urn:ietf:params:xml:ns:epp:addlEmail-1.0"
  elementFormDefault="qualified">
  <annotation>
    <documentation>Extensible Provisioning Protocol v1.0
       additional email address schema.</documentation>
  </annotation>
  <!-- Create, Update, and Info Response extension element -->
  <element name="addlEmail" type="addlEmail:addlEmailType" />
  <!--
    Single email element that can be empty
   -->
   <complexType name="addlEmailType">
     <sequence>
       <element name="email" type="addlEmail:emailType"/>
     </sequence>
   </complexType>
   <complexType name="emailType">
     <simpleContent>
       <extension base="token">
       <attribute name="primary" type="boolean" default="false"/>
      </extension>
    </simpleContent>
  </complexType>
  <!--
 End of schema.
 -->
</schema>]]></sourcecode>
      </section>
    </section>

    <section numbered="true" toc="default">
      <name>IANA Considerations</name>
      <section numbered="true" toc="default">
        <name>XML Namespace</name>
        <t> This document uses URNs to describe XML namespaces and XML schemas
   conforming to a registry mechanism described in  <xref target="RFC3688" format="default"/>.  The following URI assignments have been made by IANA:
   </t>
   <t>Registration for the addlEmail namespace:</t>
   <dl newline="false" spacing="compact">
     <dt>URI:</dt>
<dd>urn:ietf:params:xml:ns:epp:addlEmail-1.0</dd>
     <dt>Registrant Contact:</dt>
<dd>IESG</dd>
     <dt>XML:</dt>
<dd>None. Namespace URIs do not represent an XML specification.</dd>
   </dl>
   <t>Registration for the addlEmail XML Schema:</t>
   <dl newline="false" spacing="compact">
     <dt>URI:</dt>
<dd>urn:ietf:params:xml:schema:epp:addlEmail-1.0</dd>
     <dt>Registrant Contact:</dt>
<dd>IESG</dd>
     <dt>XML:</dt>
<dd>See <xref target="syntax"/> of this document.</dd>
   </dl>
      </section>
      <section numbered="true" toc="default">
        <name>EPP Extension Registry</name>
        <t>
   The EPP extension described in this document have been registered by
   IANA in the "Extensions for the Extensible Provisioning Protocol
   (EPP)" registry described in <xref target="RFC7451" format="default"/>.  The details of the
   registration are as follows:
        </t>
        <dl newline="false" spacing="compact">
                <dt>Name of Extension:</dt>
        	<dd>Additional Email Address Extension for the Extensible Provisioning Protocol (EPP)</dd>
                <dt>Document Status:</dt>
        	<dd>Standards Track</dd>
                <dt>Reference:</dt>
        	<dd>RFC 9873</dd>
                <dt>Registrant Name and Email Address:</dt>
        	<dd>IESG, &lt;iesg@ietf.org&gt;</dd>
                <dt>TLDs:</dt>
        	<dd>Any</dd>
                <dt>IPR Disclosure:</dt>
        	<dd>None</dd>
                <dt>Status:</dt>
        	<dd>Active</dd>
                <dt>Notes:</dt>
        	<dd>None</dd>
        	</dl>
      </section>
    </section>
	
    <section numbered="true" toc="default">
      <name>Security Considerations</name>
      <t>As noted in Sections <xref target="RFC6530" section="10.1" sectionFormat="bare"/> and <xref target="RFC6530" section="13" sectionFormat="bare"/> of <xref target="RFC6530" format="default"/>,
   unconstrained Unicode in email addresses can introduce a class of
   security threats that do not exist with ASCII-only email addresses.
   As EPP exists in ecosystems where email addresses passed in EPP are
   displayed in the Registration Data Access Protocol (RDAP) and other services, and copy-and-paste of these
   email addresses is common for businesses transferring domains via
   EPP, there should be safeguards against these threats.  Therefore,
   use of the SMTPUTF8 email addresses as described in this document
   <bcp14>SHOULD</bcp14> be done with policies that disallow the use of unconstrained
   Unicode.  The domain-part of these SMTPUTF8 email addresses <bcp14>SHOULD</bcp14>
   conform to IDNA2008 <xref target="RFC5895"/>.  The local-part of these SMTPUTF8 email
   addresses <bcp14>SHOULD</bcp14> be restricted to Unicode that does not introduce the
   threats noted in <xref target="RFC6530" format="default"/>.  One such possible solution would be to
   disallow characters outside of Unicode Annex 31 <xref target="Unicode-UAX31" format="default"/>.</t>

   <t>
	As an email address is often a primary end user contact, an invalid email address may put communication with the end user at risk when such contact is necessary. In case of an invalid domain name in the email address, a malicious actor can register a valid domain name with a similar U-label (homograph attack) and assume control over the domain name associated with the contact using social engineering techniques. To reduce the risk of the use of invalid domain names in email addresses, registries <bcp14>SHOULD</bcp14> validate the domain name syntax in provided email addresses and validate whether the domain name consists of the code points listed in the "IDNA Rules and Derived Property Values" registry <eref target="https://www.iana.org/assignments/idna-tables" brackets="angle"/>).</t>
	<t>Note that the syntax for internationalized email local-parts is very liberal. 
Domains are normalized during MX lookup, while local-parts are unconstrained. Implementers may wish to test that their database is able to store difficult local-parts such as U+0061 U+0300 U+00E0. For more on normalization and these three code points, see <xref target="RFC5198" section="3" sectionFormat="comma"/>.</t>
    </section>
	
	<section numbered="true" toc="default">
	  <name>Privacy Considerations</name>
	  <t>The content of &lt;addlEmail:email&gt; elements can be processed by EPP clients and servers in the same way that &lt;contact:email&gt; elements are processed, including publication in directory services such as RDAP <xref target="STD95" format="default"/>. Many data protection regulations recognize email addresses as personal data, so any policies governing the collection, transmission, and processing of contact information by EPP clients and servers should apply equally to &lt;addlEmail:email&gt; elements.</t>
    </section>
	
  </middle>
  <back>

    <references>
      <name>References</name>
      <references>
        <name>Normative References</name>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.2119.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.3688.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5321.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5322.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5730.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5733.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5890.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.6530.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.6531.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.6532.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.8174.xml"/>
	<reference anchor="W3C.REC-xmlschema-1-20041028" target="https://www.w3.org/TR/2004/REC-xmlschema-1-20041028/">
	  <front>
	    <title>XML Schema Part 1: Structures Second Edition</title>
	    <author fullname="David Beech" role="editor"/>
	    <author fullname="Henry Thompson" role="editor"/>
	    <author fullname="Murray Maloney" role="editor"/>
	    <author fullname="Noah Mendelsohn" role="editor"/>
	    <date day="28" month="October" year="2004"/>
	  </front>
          <refcontent>W3C Recommendation</refcontent>
	</reference>
	<reference anchor="W3C.REC-xmlschema-2-20041028" target="https://www.w3.org/TR/2004/REC-xmlschema-2-20041028">
	  <front>
	    <title>XML Schema Part 2: Datatypes Second Edition</title>
	    <author fullname="Ashok Malhotra" role="editor"/>
	    <author fullname="Paul V. Biron" role="editor"/>
	    <date day="28" month="October" year="2004"/>
	  </front>
          <refcontent>W3C Recommendation</refcontent>
	</reference>
      </references>
      <references>
        <name>Informative References</name>
	<xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5198.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.5895.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml/reference.RFC.7451.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml9/reference.STD.0095.xml"/>

	<reference anchor="Unicode-UAX31" target="https://www.unicode.org/reports/tr31/tr31-41.html">
	  <front>
	    <title>Unicode Identifiers and Syntax</title>
	    <author fullname="Mark Davis" role="editor"/>
            <author fullname="Robin Leroy" role="editor"/>
	    <date month="September" year="2024"/>
	  </front>
          <refcontent>Version 16.0.0</refcontent>
          <seriesInfo name="Unicode Standard Annex" value="#31"/>
          <annotation>Latest version available at
          <eref brackets="angle" target="https://www.unicode.org/reports/tr31/"/>.</annotation>
	</reference>
      </references>
    </references>

    <section numbered="false" toc="default">
      <name>Acknowledgments</name>
      <t>The authors would like to thank <contact fullname="Alexander
      Mayrhofer"/>, <contact fullname="Chris Lonvick"/>, <contact
      fullname="Gustavo Lozano"/>, <contact fullname="Jody Kolker"/>, <contact
      fullname="John C. Klensin"/>, <contact fullname="John Levine"/>, <contact
      fullname="Klaus Malorny"/>, <contact fullname="Marc Blanchet"/>,
      <contact fullname="Marco Schrieck"/>, <contact fullname="Mario
      Loffredo"/>, <contact fullname="Murray S. Kucherawy"/>, <contact
      fullname="Patrick Mevzek"/>, <contact fullname="Pete Resnick"/>,
      <contact fullname="Takahiro Nemoto"/>, <contact fullname="Taras
      Heichenko"/>, <contact fullname="Arnt Gulbrandsen"/>, <contact
      fullname="Thomas Corte"/>, <contact fullname="Gavin Brown"/>, and
      <contact fullname="Andrew Newton"/> for their careful review and
      valuable comments.</t>
    </section>

  </back>

</rfc>
